##############################################################################'#
################################  Paquetes  ####################################
##############################################################################'#

library(readr)
library(tidyverse)
library(psych)

#i <- 2022
for (i in c(2018, 2020, 2022)){
##############################################################################'#
#############################  Carga de datos  #################################
##############################################################################'#

base <- read_delim(paste('base',i,".csv", sep = ''), delim = ";",
                   escape_double = FALSE, trim_ws = TRUE)

##############################################################################'#
#######################  estadisticas descriptivas  ############################
##############################################################################'#

tabla <- describe(base)
niveles_Y <- table(base$Y)

base$Y <- as.character(base$Y)
base <- as.data.table(base)

####### Energia electrica
base <- base[Y=='1',Y:='Energia']
####### Gas por red
base <- base[Y=='2',Y:='Gas']
####### GLP
base <- base[Y=='4',Y:='GLP']
####### Leña con otros
base <- base[Y=='3'|Y=='5'|Y=='6'|Y=='7'|Y=='8',Y:='Leña']

##############################################################################'#
##########################  Export datos modelo  ###############################
##############################################################################'#

write.table(tabla,paste("./Table/Tabla_descriptiva",i,'.csv',sep=''),sep = ";",dec=".")
write.table(niveles_Y,paste("./Table/Y_",i,'.csv',sep=''),sep = ";",dec=".")
write.table(base,paste("./base_paper",i,'.csv',sep=''),sep = ";",dec=".",row.names=FALSE)
}
